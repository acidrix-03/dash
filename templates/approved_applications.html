{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">Approved Applications</h2>

    <!-- CTO Applications -->
    <div class="application-section">
        <h3 class="section-title">CTO Applications</h3>
        <input type="text" id="ctoInput" onkeyup="filterTable('ctoTable', 'ctoInput')" class="form-control mb-3" placeholder="Search for names..">
        <table class="table table-striped table-bordered" id="ctoTable">
            <thead class="thead-dark">
                <tr>
                    <th onclick="sortTable('ctoTable', 0)" class="sortable">ID</th>
                    <th onclick="sortTable('ctoTable', 1)" class="sortable">Name</th>
                    <th onclick="sortTable('ctoTable', 2)" class="sortable">Position</th>
                    <th onclick="sortTable('ctoTable', 3)" class="sortable">Days</th>
                    <th onclick="sortTable('ctoTable', 4)" class="sortable">Start Date</th>
                    <th onclick="sortTable('ctoTable', 5)" class="sortable">End Date</th>
                    <th onclick="sortTable('ctoTable', 6)" class="sortable">Date Approved</th>
                </tr>
            </thead>
            <tbody>
                {% for app in cto_approved_apps %}
                <tr>
                    <td>{{ app[0] }}</td>
                    <td>{{ app[2] }}</td>
                    <td>{{ app[3] }}</td>
                    <td>{{ app[4] }}</td>
                    <td>{{ app[5] }}</td>
                    <td>{{ app[6] }}</td>
                    <td>{{ app[9] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div id="ctoPagination" class="pagination-controls"></div>
    </div>

    <!-- Leave Applications -->
    <div class="application-section mt-4">
        <h3 class="section-title">Leave Applications</h3>
        <input type="text" id="leaveInput" onkeyup="filterTable('leaveTable', 'leaveInput')" class="form-control mb-3" placeholder="Search for names..">
        <table class="table table-striped table-bordered" id="leaveTable">
            <thead class="thead-dark">
                <tr>
                    <th onclick="sortTable('leaveTable', 0)" class="sortable">ID</th>
                    <th onclick="sortTable('leaveTable', 1)" class="sortable">Name</th>
                    <th onclick="sortTable('leaveTable', 2)" class="sortable">Position</th>
                    <th onclick="sortTable('leaveTable', 3)" class="sortable">Days</th>
                    <th onclick="sortTable('leaveTable', 4)" class="sortable">Start Date</th>
                    <th onclick="sortTable('leaveTable', 5)" class="sortable">End Date</th>
                    <th onclick="sortTable('leaveTable', 6)" class="sortable">Date Approved</th>
                </tr>
            </thead>
            <tbody>
                {% for app in leave_approved_apps %}
                <tr>
                    <td>{{ app[0] }}</td>
                    <td>{{ app[2] }}</td>
                    <td>{{ app[3] }}</td>
                    <td>{{ app[4] }}</td>
                    <td>{{ app[5] }}</td>
                    <td>{{ app[6] }}</td>
                    <td>{{ app[9] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div id="leavePagination" class="pagination-controls"></div>
    </div>

    <!-- Travel Authorities -->
    <div class="application-section mt-4">
        <h3 class="section-title">Travel Authorities</h3>
        <input type="text" id="travelInput" onkeyup="filterTable('travelTable', 'travelInput')" class="form-control mb-3" placeholder="Search for names..">
        <table class="table table-striped table-bordered" id="travelTable">
            <thead class="thead-dark">
                <tr>
                    <th onclick="sortTable('travelTable', 0)" class="sortable">ID</th>
                    <th onclick="sortTable('travelTable', 1)" class="sortable">Name</th>
                    <th onclick="sortTable('travelTable', 2)" class="sortable">Position</th>
                    <th onclick="sortTable('travelTable', 3)" class="sortable">Start Date</th>
                    <th onclick="sortTable('travelTable', 4)" class="sortable">End Date</th>
                    <th onclick="sortTable('travelTable', 5)" class="sortable">Destination</th>
                    <th onclick="sortTable('travelTable', 6)" class="sortable">Purpose</th>
                    <th onclick="sortTable('travelTable', 7)" class="sortable">Date Approved</th>
                </tr>
            </thead>
            <tbody>
                {% for app in travel_approved_apps %}
                <tr>
                    <td>{{ app[0] }}</td>
                    <td>{{ app[2] }}</td>
                    <td>{{ app[3] }}</td>
                    <td>{{ app[5] }}</td>
                    <td>{{ app[6] }}</td>
                    <td>{{ app[7] }}</td>
                    <td>{{ app[8] }}</td>
                    <td>{{ app[9] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div id="travelPagination" class="pagination-controls"></div>
    </div>

    <div class="text-center mt-4">
        <a href="{{ url_for('approver_dashboard') }}" class="btn btn-primary">Go back to dashboard</a>
    </div>
</div>

<!-- Pagination and Sorting/Filtering JavaScript -->
<script>
// Existing JavaScript code remains unchanged...
</script>

<style>
    .application-section {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .section-title {
        font-weight: bold;
        color: #343a40;
    }
    
    .sortable {
        cursor: pointer;
    }

    .pagination-controls {
        margin-top: 15px;
        text-align: center;
    }

    .pagination-controls button {
        margin: 0 2px;
    }

    .thead-dark th {
        background-color: #343a40;
        color: white;
    }
</style>
{% endblock %}
